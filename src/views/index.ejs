<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;700&family=Roboto:wght@100;300;400;500;700;900&display=swap"
        rel="stylesheet">

    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/styles-index.css">

    <title>Golosinas Mailin</title>
</head>

<body>


    <%- include('./partials/header') %>


        <main>

            <section class="main__banner">
                <img src="./images/banner-fantoche.jpg" class="main__banner-img">
            </section>

            <section class="main__categoria">
                <h3 class="main-title">Categorías</h3>

                <div class="main__categoria-container">
                    <a href="" class="main__categoria-link"><img src="./images/categoria-alfajores.jpg" alt=""
                            class="main__categoria-img"></a>
                    <a href="" class="main__categoria-link"><img src="./images/categoria-caramelos.jpg" alt=""
                            class="main__categoria-img"></a>
                    <a href="" class="main__categoria-link"><img src="./images/categoria-chupetines.jpg" alt=""
                            class="main__categoria-img"></a>
                    <a href="" class="main__categoria-link"><img src="./images/categoria-galletas.jpg" alt=""
                            class="main__categoria-img"></a>
                </div>

            </section>

            <section class="main__ofertas">

                <h3 class="main-title">Ofertas Destacadas</h3>

                <div class="card">
                    
                    <!-- <div class="card-slider left" id="card-slider-left">
                        <i class="fa-solid fa-angle-left"></i>
                    </div> -->
                    
                    <% products.forEach(product => { %>
                
                        <%if(!product.descuento > 0) { %>

                            <!-- card sin descuento -->
                            <article class="main__ofertas--card">
                                <a href="/productos/<%=product.id%>" class="main__ofertas--card-img">
                                    <img src="/images/products/<%=product.img%>" alt="<%=product.nombre%>">
                                </a>

                                <div class="card-descripcion">
                                    <p class="main__ofertas--card-categ"><%=product.categoria.toUpperCase()%></p>
                                    <a href="/productos/<%=product.id%>" class="main__ofertas--card-titulo">
                                        <%=product.nombre%></a>
                                    <div class="main__ofertas--card-precios">
                                        <p class="precio-final">$ <%=product.precio%></p>
                                    </div>
                                    <button class="main__ofertas-button">Añadir al carrito</button>
                                </div>

                            </article>

                    
                        <% }else{ %>        

                    <!-- card con descuento -->
                    <article class="main__ofertas--card">

                        <a href="/productos/<%=product.id%>" class="main__ofertas--card-img">
                            <img src="/images/products/<%=product.img%>" alt="<%=product.nombre%>">
                        </a>

                        <div class="contenedor-descuento">
                            <p class="descuento"><%=product.descuento%>% OFF</p>
                        </div>
                        <div class="card-descripcion">
                            <p class="main__ofertas--card-categ"><%=product.categoria.toUpperCase()%></p>
                            <a href="/productos/<%=product.id%>" class="main__ofertas--card-titulo"><%=product.nombre%></a>
                            <div class="main__ofertas--card-precios">
                                <p class="precio">$  <%=product.precio%></p>
                                <p class="precio-final">$ <% let precioFinal = product.precio - (product.precio * (product.descuento/100)) %> <%= precioFinal %></p>
                            </div>
                            <button class="main__ofertas-button">Añadir al carrito</button>
                        </div>

                    </article>

                    <% } %>
                <% }); %>

                    <!-- <div class="card-slider" id="card-slider-right">
                        <i class="fa-solid fa-angle-right"></i>
                    </div> -->
                </div>

            </section>

        </main>

        <%- include('./partials/footer') %>

</body>

</html>